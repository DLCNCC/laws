# 添加新法律文件指南

## 1. 项目运行机制

该项目是基于 **Hugo** 的静态站点生成器，使用 **Docsy** 主题构建。其核心运行机制如下：

### 1.1 内容组织

- **Markdown 驱动**：所有法律文档以 Markdown 格式存储
- **分类管理**：按法律类别（宪法、法律、司法解释等）组织在 `content` 目录下
- **自动生成**：Hugo 自动将 Markdown 文件转换为静态 HTML 页面

### 1.2 元数据系统

每个 Markdown 文件都包含 **YAML 前置元数据**，用于描述文档的属性，如标题、制定机关、公布日期、效力状态等。

### 1.3 自动构建

- **本地开发**：使用 `hugo server` 启动本地服务器，自动重载修改
- **生产部署**：通过 GitHub Actions 自动构建和部署到 GitHub Pages

## 2. 添加新法律文件的步骤

### 2.1 准备工作

#### 2.1.1 文件命名规则

- **文件名**：使用 UUID 格式命名，例如 `2c909fdd678bf17901678bf5a6740055.md`
- **UUID 生成**：可以使用在线工具生成，如 [UUID Generator](https://www.uuidgenerator.net/)

#### 2.1.2 存放位置

根据法律文件的类别，将文件放入对应的目录：

| 法律类别 | 目录路径 |
|----------|----------|
| 宪法 | `content/宪法/` |
| 法律 | `content/法律/` |
| 司法解释 | `content/司法解释/` |

### 2.2 创建 Markdown 文件

#### 2.2.1 基础模板

创建一个新的 Markdown 文件，包含以下 YAML 前置元数据和文档内容：

```markdown
---
id: <UUID>
title: <完整标题>
LinkTitle: <简短标题>
author: <制定机关>
date: '<发布日期>'
publication_date: '<发布日期>'
effective_date: '<施行日期>'
status: <状态>
group: <法律类型>
categories:
  - <主类别>
  - <子类别>
tags:
  - <标签1>
  - <标签2>
years:
  - <年份>
keywords:
  - <关键词1>
urls:
  - <原始文档链接>
---

<文档正文>
```

#### 2.2.2 元数据字段说明

| 字段 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|
| `id` | 字符串 | 是 | 唯一标识符（UUID） | `2c909fdd678bf17901678bf5a6740055` |
| `title` | 字符串 | 是 | 完整标题 | `全国人民代表大会常务委员会关于批准《国务院关于工人退休、退职的暂行办法》的决议` |
| `LinkTitle` | 字符串 | 是 | 列表页显示的简短标题 | `关于批准《国务院关于工人退休、退职的暂行办法》的决议（1978）` |
| `author` | 字符串 | 是 | 制定机关 | `全国人民代表大会常务委员会` |
| `date` | 日期 | 是 | 发布日期（格式：YYYY-MM-DD） | `'1978-05-24'` |
| `publication_date` | 日期 | 是 | 公布日期（格式：YYYY-MM-DD） | `'1978-05-24'` |
| `effective_date` | 日期 | 是 | 施行日期（格式：YYYY-MM-DD） | `'1978-05-24'` |
| `status` | 字符串 | 是 | 效力状态，可选值：有效、已修改、已废止、尚未生效、未知 | `有效` |
| `group` | 字符串 | 是 | 法律类型，对应存放目录 | `法律` |
| `categories` | 数组 | 是 | 分类列表，包含主类别和子类别 | `- 法律
- 社会法` |
| `tags` | 数组 | 是 | 标签列表，用于搜索和过滤 | `- 全国人民代表大会常务委员会
- 有效` |
| `years` | 数组 | 是 | 年份标签 | `- 1978年` |
| `keywords` | 数组 | 是 | 关键词列表，用于搜索 | `- 原则` |
| `urls` | 数组 | 是 | 原始文档链接 | `- https://flk.npc.gov.cn/detail?id=...` |

#### 2.2.3 文档正文格式

- **标题**：使用 `#` 或 `##` 标签，根据层级设置
- **段落**：直接输入文本，无需特殊格式
- **引用**：使用 `>` 标签，如法律条文的发布说明
- **列表**：使用 `-` 或 `1.` 标签，用于条款列举

### 2.3 本地预览

添加文件后，可以通过本地服务器预览效果：

```bash
# 启动本地服务器
hugo server --bind=0.0.0.0 --port=1313 --baseURL=http://localhost:1313
```

访问 `http://localhost:1313` 查看效果，系统会自动重载修改。

### 2.4 部署到生产环境

#### 2.4.1 自动化部署

项目配置了 GitHub Actions 自动部署，当满足以下条件时会自动运行：

1. **代码推送**：向 `main` 分支推送代码时
2. **定期执行**：每周六 UTC 5:05 自动运行
3. **手动触发**：在 GitHub Actions 页面手动触发

#### 2.4.2 手动部署（可选）

```bash
# 构建站点
hugo --gc --minify --baseURL https://lawnav.github.io

# 部署到 GitHub Pages
# 方法 1：使用 git 直接推送
git subtree push --prefix public origin gh-pages

# 方法 2：使用 GitHub CLI
gh pages deploy --dir public
```

## 3. 最佳实践

### 3.1 文件命名建议

- **使用 UUID**：确保每个文件都有唯一标识符
- **保持一致性**：遵循现有文件的命名格式

### 3.2 元数据填写规范

- **日期格式**：严格使用 `YYYY-MM-DD` 格式
- **状态值**：使用标准状态值，确保一致性
- **分类准确**：选择正确的主类别和子类别
- **标签全面**：添加相关标签，提高搜索可用性

### 3.3 内容格式建议

- **保持原样**：尽量保持法律条文的原始格式
- **使用 Markdown 语法**：正确使用标题、列表、引用等语法
- **避免复杂格式**：简化表格和特殊格式，确保兼容性

## 4. 故障排查

### 4.1 本地预览不显示

- 检查文件是否放在正确的目录
- 检查 YAML 元数据格式是否正确
- 检查 `id` 是否唯一
- 查看 Hugo 服务器日志，查找错误信息

### 4.2 部署失败

- 检查 GitHub Actions 日志，查找错误信息
- 检查文件格式是否符合要求
- 确保 Hugo 版本符合要求（>= 0.146.0 扩展版）

### 4.3 元数据显示异常

- 检查元数据字段名称是否正确
- 检查字段类型是否匹配（字符串、日期、数组等）
- 检查是否缺少必填字段

## 5. 示例文件

以下是一个完整的示例文件：

```markdown
---
id: 2c909fdd678bf17901678bf5a6740055
title: 全国人民代表大会常务委员会关于批准《国务院关于工人退休、退职的暂行办法》的决议
LinkTitle: 关于批准《国务院关于工人退休、退职的暂行办法》的决议（1978）
author: 全国人民代表大会常务委员会
date: '1978-05-24'
publication_date: '1978-05-24'
effective_date: '1978-05-24'
status: 有效
group: 法律
categories:
  - 法律
  - 社会法
tags:
  - 全国人民代表大会常务委员会
  - 有效
  - 全国人大及其常委会
  - 全国人大常委会
  - 办法
  - 决议
years:
  - 1978年
keywords:
  - 原则
urls:
  - https://flk.npc.gov.cn/detail?id=2c909fdd678bf17901678bf5a6740055
---

**全国人民代表大会常务委员会关于批准《国务院关于工人退休、退职的暂行办法》的决议**

> （1978年5月24日通过）

第五届全国人民代表大会常务委员会第二次会议决定：原则批准《国务院关于工人退休、退职的暂行办法》。
```

## 总结

添加新的法律文件需要遵循以下核心步骤：

1. **生成 UUID**：为新文件生成唯一标识符
2. **创建 Markdown 文件**：包含完整的 YAML 元数据和文档正文
3. **放置到正确目录**：根据法律类别选择存放目录
4. **本地预览**：使用 Hugo 服务器验证效果
5. **部署到生产**：通过 GitHub Actions 自动部署或手动推送

遵循上述指南，可以确保新添加的法律文件能够正确显示在网站上，并被准确索引和搜索。